# Production Configuration Example
# Copy this to config.production.yaml and customize

app:
  name: lighter-bot
  log_level: INFO  # Use INFO or WARNING for production

# API Configuration (use environment variables in production)
api:
  base_url: ${API_BASE_URL}
  key: ${API_KEY_PRIVATE_KEY}
  account_index: ${ACCOUNT_INDEX}
  api_key_index: ${API_KEY_INDEX}
  max_api_key_index: ${MAX_API_KEY_INDEX:-}
  nonce_management: ${NONCE_MANAGEMENT:-}

# Maker Configuration
maker:
  dry_run: false  # Set to false for live trading
  pair: "market:1"
  spread_bps: 8
  size: 5
  post_only: true
  price_scale: 100            # Example: 2 decimal places
  size_scale: 1000000         # Example: 1e6 (depends on instrument)
  limits:
    max_cancels: 60
    max_latency_ms: 2000

# Optimizer
optimizer:
  enabled: true
  scan_interval_s: 30
  top_n: 3
  min_open_interest: 0
  max_spread_bps: 25
  w_funding: 1.0
  w_oi: 0.2
  spread_bps_penalty: 0.02
  min_dwell_s: 120
  hysteresis_score_margin: 0.05
  max_switches_per_hour: 12

# Self-Trade Guard
guard:
  price_band_bps: 50
  crossed_book_protection: true
  max_inventory_notional: 35
  max_position_units: 0.21
  kill_on_crossed_book: true
  kill_on_inventory_breach: true
  backoff_seconds_on_block: 2
  max_position_units: 0.21

# Alerts
alerts:
  enabled: true
  discord_webhook_url: ${DISCORD_WEBHOOK}

# Telemetry (ENABLE for production!)
telemetry:
  enabled: true
  port: 9100

# Watchdogs
watchdogs:
  ws_stale_seconds: 30
  quote_stale_seconds: 20
  reminder_every_seconds: 300

# WebSocket
ws:
  url: ${WS_URL}
  fallback_on_fail: true
  max_failures: 3
  channels:
    - "market_stats/all"
  auth_token: ${WS_AUTH_TOKEN:}
  log_mid_interval_s: 1.0  # throttle mid-price INFO logs (seconds between entries)
account_listener:
  enabled: true
  debug: true
  ws:
    url: ${WS_URL}
    auth_token: ${WS_AUTH_TOKEN:}

# Capture (optional - can disable for production)
capture:
  write_raw: false  # Set to false to save disk space
  raw_path: logs/ws_raw.jsonl

# Replay (DISABLED for production)
replay:
  enabled: false
  path: logs/ws_raw.jsonl
  speed: 1.0
  market_filter: []

# Chaos (DISABLED for production)
chaos:
  enabled: false
  latency:
    enabled: false
  reconnect:
    enabled: false
  quote_width:
    enabled: false
  cancel_rate:
    enabled: false

